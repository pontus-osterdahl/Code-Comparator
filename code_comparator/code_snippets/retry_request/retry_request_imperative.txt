String urlStr = "https://www.google.se";

int totalRequests = 5;

int requestsLeft = 5;

int timeToWait = 500;

while(requestsLeft > 0)
{
  try
  {
    System.out.println("Requested URL: " + urlStr);

    URLConnection urlConn = null;

    URL url = new URL(urlStr);

    urlConn = url.openConnection();

    urlConn.connect();

    System.out.println(urlConn.getURL() + " was succesfully called ");

    break;
  }
  
  catch(Exception e)
  {
    try
    {
      System.out.println("Retry...");

      requestsLeft--;

      if(requestsLeft <= 0)
      {
        throw new Exception("Retry Failed for " + urlStr + ". Total " +
          totalRequests + " attempts made");
      }

      try
      {
        Thread.sleep(timeToWait);
      }

      catch (InterruptedException ignored) 
      {
        
      }
    }
    
    catch (RuntimeException e1) 
    {
      throw new RuntimeException("Exception calling URL:" + urlStr, e);
    }
    
    catch (Exception e1)
    {
      throw new RuntimeException(e1);
    }
  }
}
